<!DOCTYPE html>
<html data-bs-theme="auto" lang="en">
 <head>
  <script src="js/color-modes.js">
  </script>
  <script src="https://md-block.verou.me/md-block.js" type="module">
  </script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <link href="https://raw.githubusercontent.com/PortsMaster/PortMaster-Website/main/favicon.ico" rel="shortcut icon"/>
  <link href="css/shared.css" rel="stylesheet"/>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
  </script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js">
  </script>
  <link href="css/documentation.css" rel="stylesheet"/>
  <title>
   Porting
  </title>
 </head>
 <body class="bg-body-tertiary">
  <svg class="d-none" xmlns="http://www.w3.org/2000/svg">
   <symbol id="check2" viewbox="0 0 16 16">
    <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z">
    </path>
   </symbol>
   <symbol id="circle-half" viewbox="0 0 16 16">
    <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z">
    </path>
   </symbol>
   <symbol id="moon-stars-fill" viewbox="0 0 16 16">
    <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z">
    </path>
    <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z">
    </path>
   </symbol>
   <symbol id="sun-fill" viewbox="0 0 16 16">
    <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z">
    </path>
   </symbol>
  </svg>
  <div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
   <button aria-expanded="false" aria-label="Toggle theme (auto)" class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown" id="bd-theme" type="button">
    <svg class="bi my-1 theme-icon-active" height="1em" width="1em">
     <use href="#circle-half">
     </use>
    </svg>
    <span class="visually-hidden" id="bd-theme-text">
     Toggle theme
    </span>
   </button>
   <ul aria-labelledby="bd-theme-text" class="dropdown-menu dropdown-menu-end shadow">
    <li>
     <button aria-pressed="false" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" type="button">
      <svg class="bi me-2 opacity-50 theme-icon" height="1em" width="1em">
       <use href="#sun-fill">
       </use>
      </svg>
      Light
      <svg class="bi ms-auto d-none" height="1em" width="1em">
       <use href="#check2">
       </use>
      </svg>
     </button>
    </li>
    <li>
     <button aria-pressed="false" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" type="button">
      <svg class="bi me-2 opacity-50 theme-icon" height="1em" width="1em">
       <use href="#moon-stars-fill">
       </use>
      </svg>
      Dark
      <svg class="bi ms-auto d-none" height="1em" width="1em">
       <use href="#check2">
       </use>
      </svg>
     </button>
    </li>
    <li>
     <button aria-pressed="true" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" type="button">
      <svg class="bi me-2 opacity-50 theme-icon" height="1em" width="1em">
       <use href="#circle-half">
       </use>
      </svg>
      Auto
      <svg class="bi ms-auto d-none" height="1em" width="1em">
       <use href="#check2">
       </use>
      </svg>
     </button>
    </li>
   </ul>
  </div>
  <nav aria-label="Fourth navbar example" class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
   <div class="container-fluid">
    <a class="navbar-brand" href="index.html">
     <img height="35px" src="https://raw.githubusercontent.com/PortsMaster/PortMaster-Website/main/logo.svg"/>
    </a>
    <button aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-bs-target="#navbarsExample04" data-bs-toggle="collapse" type="button">
     <span class="navbar-toggler-icon">
     </span>
    </button>
    <div class="collapse navbar-collapse" id="navbarsExample04">
     <ul class="navbar-nav me-auto mb-2 mb-md-0">
      <li class="nav-item">
       <a aria-current="page" class="nav-link active" href="https://discord.gg/JxYBp9HTAY">
        Discord
       </a>
      </li>
      <li class="nav-item">
       <a aria-current="page" class="nav-link active" href="https://github.com/PortsMaster">
        GitHub
       </a>
      </li>
      <li class="nav-item">
       <a aria-current="page" class="nav-link active" href="faq.html">
        FAQ
       </a>
      </li>
      <li class="nav-item">
       <a aria-current="page" class="nav-link active" href="games.html">
        Games
       </a>
      </li>
      <li class="nav-item">
       <a aria-current="page" class="nav-link active" href="https://suggestions.portmaster.games">
        Port Suggestions
       </a>
      </li>
      <li class="nav-item">
       <a aria-current="page" class="nav-link active" href="https://opencollective.com/portmaster">
        <i class="bi bi-bag-heart-fill">
        </i>
        Donate
       </a>
      </li>
      <li class="nav-item dropdown">
       <a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#">
        Portmaster
       </a>
       <ul class="dropdown-menu">
        <li>
         <a class="dropdown-item" href="installation.html">
          Installation
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="runtimes.html">
          Runtimes
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="supported-devices.html">
          Supported Devices
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="gptokeyb-documentation.html">
          Gptokeyb Documentation
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="harbourmaster.html">
          Harbourmaster
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="developer-details.html">
          Developer Details
         </a>
        </li>
       </ul>
      </li>
      <li class="nav-item dropdown">
       <a aria-expanded="false" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#">
        Contribute
       </a>
       <ul class="dropdown-menu">
        <li>
         <a class="dropdown-item" href="porting.html">
          Porting
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="packaging.html">
          Packaging
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="build-environments.html">
          Build Environments
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="port-tools.html">
          Port Tools
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="port-json.html">
          Port JSON Generator
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="port-markdown.html">
          Port Markdown Generator
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="metadata-editor.html">
          Port Metadata Editor
         </a>
        </li>
        <li>
         <a class="dropdown-item" href="themes.html">
          Themes
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </div>
   </div>
  </nav>
  <br/>
  <br/>
  <br/>
  <div class="container">
   <main>
    <h1>
     Development and how to contribute
    </h1>
    <h2>
     What are Ports?
    </h2>
    <p>
     We have different types of games we support:
    </p>
    <ol>
     <li>
      Open Source Games from Repos like Github where we compile and package the game for PortMaster
     </li>
     <li>
      Open Source Engines made from scratch that work with original game assets
     </li>
     <li>
      Game Engines like GameMaker studio / Godot / Love2d that have compatible runners that need the original gamedata
     </li>
     <li>
      Linux Userspace x86 Emulator (Box86) that translate X86 Linux Games to arm.
     </li>
     <li>
      Linux Userspace x64 Emulators (Box64) that translate x64 Linux games to aarch64
     </li>
    </ol>
    <p>
     Mind for 3/4/5 a LOT of hacking and tweaking might be needed.
    </p>
    <h2>
     How do we compile our games for PortMaster?
    </h2>
    <p>
     Since PortMaster is platform independent and delivers their own dependencies we don't rely on the build mechanism of the CFWs out there.
Various Instructions for Build Environments can be found here:
     <a href="https://portmaster.games/build-environments.html">
      https://portmaster.games/build-environments.html
     </a>
    </p>
    <p>
     Once you have your software compiled it is recommeded you test your game directly on your device via ssh.
For testing you can stop Emulationstation to not clash with your Ports
    </p>
    <ul>
     <li>
      AmberELEC, uOS, Jelos:
      <code>
       systemctl stop emustation
      </code>
     </li>
     <li>
      ArkOS:
      <code>
       systemctl stop emulationstation
      </code>
     </li>
     <li>
      muOS:
      <code>
       killall -q frontend.sh muxlaunch
      </code>
     </li>
     <li>
      Knulli:
      <code>
       /etc/init.d/S31emulationstation stop
      </code>
     </li>
     <li>
      Rocknix:
      <code>
       systemctl stop essway.service
      </code>
     </li>
    </ul>
    <p>
     For packaging use the Packaging Guide
     <a href="https://portmaster.games/packaging.html">
      https://portmaster.games/packaging.html
     </a>
     and of course other Ports as a reference.
    </p>
    <h2>
     Restrictions &amp; Tools:
    </h2>
    <p>
     The Chipsets we're working with unfortunately have some restrictions in terms of features.
So we can't just use any game, compile it and run it.
    </p>
    <p>
     Most CFWs that support PortMaster don't have full OpenGL or Display Drivers: So no openGL and no x11 / weston.
With the new WestonPack Runtime from Binary
     <a href="https://github.com/binarycounter/Westonpack/wiki/">
      WestonPack Wiki
     </a>
     a lot of these may work now.
    </p>
    <p>
     Generally speaking Anbernic devices running a Rockchip SoC for example use the old 3.x Linux kernel with proprietary ARM drivers for Mali and not Panfrost. So only OpenGL ES is available for Linux.
    </p>
    <p>
     There is a translation layer called Gl4es which has a partial support of openGL up to OpenGL 2.x
    </p>
    <p>
     Tools we use:
    </p>
    <ul>
     <li>
      <a href="#">
       OpenGL ES 2 support
      </a>
     </li>
     <li>
      <a href="https://github.com/ptitSeb/gl4es">
       OpenGL 2.x through GL4ES
      </a>
     </li>
     <li>
      <a href="https://github.com/ptitSeb/box86">
       Box86 (Linux Userspace x86 Emulator, targeted at ARM Linux devices)
      </a>
     </li>
     <li>
      <a href="https://github.com/ptitSeb/box64">
       Box64 (Linux Userspace x86_64 Emulator, targeted at ARM64 Linux devices)
      </a>
     </li>
     <li>
      <a href="https://github.com/PortsMaster/gptokeyb">
       gptokeyb for keyboard/mouse/joystick mapping using a control file
      </a>
     </li>
     <li>
      <a href="#">
       No Vulkan, No X11, No display manager at all so KMS/DRM or output via SDL2 it is
      </a>
     </li>
     <li>
      <a href="https://github.com/libsdl-org/sdl12-compat">
       SDL1.2 through sdl1.2compat
      </a>
     </li>
     <li>
      <a href="https://github.com/JohnnyonFlame/droidports">
       Gamemaker Games Runner GMloader
      </a>
     </li>
     <li>
      <a href="https://github.com/efornara/frt/tree/2.0">
       Godot Games via FRT 2
      </a>
     </li>
     <li>
      [Love2d] Games via Love2d Engine (
      <a href="https://github.com/Cebion/love2d_aarch64">
       https://github.com/Cebion/love2d_aarch64
      </a>
      )
     </li>
     <li>
      <a href="https://github.com/binarycounter/Westonpack">
       Westonpack Runtime
      </a>
      x11, Godot4, Java, LibGDX, SFML, SDL3, Allegro
      <a href="https://github.com/binarycounter/Westonpack/wiki/">
       WestonPack
      </a>
     </li>
    </ul>
    <h2>
     How to Package
    </h2>
    <p>
     <a href="https://github.com/christianhaitian/PortMaster/blob/main/docs/packaging.md">
      Packaging Instructions
     </a>
     For packaging use the Packaging Guide
     <a href="https://portmaster.games/packaging.html">
      https://portmaster.games/packaging.html
     </a>
     and of course other Ports as a reference.
    </p>
    <h2>
     GL4ES
    </h2>
    <p>
     If a game uses OpenGL you have the ability to use GL4ES.
    </p>
    <p>
     GL4ES is a library that provides OpenGL 2.x functionality for GLES2.0 accelerated Hardware (and of course also support OpenGL 1.5 function, sometimes better than when using GLES 1.1 backend)
There is also support for GLES 1.1 Hardware, emulating OpenGL 1.5, and some OpenGL 2.x+ extensions.
    </p>
    <p>
     Most function of OpenGL up to 1.5 are supported, with some notable exceptions:
    </p>
    <p>
     Reading of Depth or Stencil buffer will not work
GL_FEEDBACK mode is not implemented
No Accum emulation
Some known general limitations:
    </p>
    <p>
     GL_SELECT as some limitation in its implementation (for example, current Depth buffer or bounded texture are not taken into account, also custom vertex shader will not work here)
NPOT texture are supported, but not with GL_REPEAT / GL_MIRRORED, only GL_CLAMP will work properly (unless the GLES Hardware support NPOT)
Multiple Color attachment on Framebuffer are not supported
OcclusionQuery is implemented, but with a 0 bits precision
Probably many other things
    </p>
    <p>
     If you want to use gl4es make sure to drop the
     <code>
      libGL.so.1
     </code>
     library into the libs folder in your port.
    </p>
    <p>
     When using GL4ES you must also set the environment variables so that gl4es can work properly.
For our devices these are almost always:
    </p>
    <pre><code>export LIBGL_ES=2
export LIBGL_GL=21
export LIBGL_FB=4
</code></pre>
    <p>
     To Compile GL4ES:
    </p>
    <pre><code>git clone https://github.com/ptitSeb/gl4es.git
cd gl4es
cmake .. -DNOX11=ON -DGLX_STUBS=ON -DEGL_WRAPPER=ON -DGBM=ON
make
</code></pre>
    <h2>
     QT5
    </h2>
    <p>
     You have the ability to use QT5 for our handheld devices by using the official eglfs plugin.
We provide QT5 libraries as a runtime since they are +150mb big.
    </p>
    <p>
     To troubleshoot QT5 games you can use
     <code>
      export QT_DEBUG_PLUGINS=1
     </code>
     to get more detailed error output.
    </p>
    <p>
     Following exports are needed to run the game
     <code>
      QML2_IMPORT_PATH
     </code>
     showing to qt5/qml
     <code>
      QT_QPA_PLATFORM=eglfs
     </code>
     choosing the eglfs plugin for egl gles output
     <code>
      QT_PLUGIN_PATH
     </code>
     showing to qt5/plugins. If you game uses a nonstandard plugin library you need to configure it on your buildhost with qmake and then copy the libraries over
     <code>
      LD_LIBRARY_PATH
     </code>
     to qt5/libs
    </p>
    <p>
     To compile QT5 for aarch64
    </p>
    <pre><code>git clone git://code.qt.io/qt/qt5.git
cd qt5/
git checkout 5.15
./init-repository --module-subset=default
./configure -release -opengl es2 -eglfs -no-xcb -gbm -kms -shared -opensource -confirm-license -make libs -v
make
make install
</code></pre>
    <p>
     For more information about EGLFS and Aarch64 see this article
     <a href="https://wiki.qt.io/RaspberryPi2EGLFS">
      https://wiki.qt.io/RaspberryPi2EGLFS
     </a>
    </p>
    <h2>
     QT6
    </h2>
    <p>
     You have the ability to use QT6 for our handheld devices by using the official eglfs plugin.
We provide QT6 libraries as a runtime since they are +150mb big.
    </p>
    <p>
     To troubleshoot QT6 games you can use
     <code>
      export QT_DEBUG_PLUGINS=1
     </code>
     to get more detailed error output.
    </p>
    <p>
     Following exports are needed to run the game
     <code>
      QML2_IMPORT_PATH
     </code>
     showing to qt6/qml
     <code>
      QT_QPA_PLATFORM=eglfs
     </code>
     choosing the eglfs plugin for egl gles output
     <code>
      QT_PLUGIN_PATH
     </code>
     showing to qt6/plugins. If you game uses a nonstandard plugin library you need to configure it on your buildhost with qmake and then copy the libraries over
     <code>
      LD_LIBRARY_PATH
     </code>
     to qt6/libs
    </p>
    <p>
     To compile QT6 for aarch64
    </p>
    <pre><code>git clone git://code.qt.io/qt/qt5.git qt6
cd qt6/
git checkout 6.6
./init-repository --module-subset=default
mkdir qt6-build &amp;&amp; cd qt6-build
./cmake with following variables
-DFEATURE_accessibility_atspi_bridge: BOOL=OFF -DFEATURE_androiddeployqt: BOOL=OFF -DFEATURE_egl_x11: BOOL=OFF -DFEATURE_eglfs_x11: BOOL=OFF -DFEATURE_opengl_desktop: BOOL=OFF
-DFEATURE_opengles2: BOOL=ON -DFEATURE_opengles3: BOOL=ON -DFEATURE_opengles31: BOOL=ON -DFEATURE_opengles32: BOOL=ON -DFEATURE_qt3d_vulkan: BOOL=OFF 
-DFEATURE_vkkhrdisplay: BOOL=OFF -DFEATURE_vulkan: BOOL=OFF -DFEATURE_wayland_vulkan_server_buffer: BOOL=OFF -DFEATURE_xcb_xlib: BOOL=OFF -DFEATURE_xkbcommon_x11: BOOL=OFF
make
make install
</code></pre>
    <h2>
     GPTOKEYB
    </h2>
    <p>
     <code>
      gptokeyb
     </code>
     has the ability to act as a way to quit a game via start + select.
For this you call
     <code>
      gptokeyb
     </code>
     with the application name.
    </p>
    <p>
     ie.
     <code>
      ./gptokeyb "application"
     </code>
    </p>
    <p>
     If you want to additionally set a custom config for example you can then set the
     <code>
      -c
     </code>
     switch to start
     <code>
      gptokeyb
     </code>
     in virtual keyboard mode.
    </p>
    <p>
     ie
     <code>
      ./gptokeyb "application" -c mykeymaps.gptk
     </code>
    </p>
    <p>
     For the full GPTOKEYB Documentation
     <a href="https://portmaster.games/gptokeyb-documentation.html">
      https://portmaster.games/gptokeyb-documentation.html
     </a>
    </p>
    <h2>
     Java
    </h2>
    <p>
     AmberELEC / uOS / Jelos has JDK support already built in once you start a j2me game for the first time.
You can supply this also via Portmaster Runtimes
Note you also need a display backend for your java application. So just running a jar file without anything won't work.
    </p>
    <p>
     As of yet we have no Port that uses these but in theory this could be interesting for LIBGDX
    </p>
    <p>
     <strong>
      Example
     </strong>
     :
    </p>
    <pre><code>mkdir /storage/jdk
https://cdn.azul.com/zulu-embedded/bin/zulu11.48.21-ca-jdk11.0.11-linux_aarch64.tar.gz
tar xvfz zulu11.48.21-ca-jdk11.0.11-linux_aarch64.tar.gz
JAVA_HOME='/storage/jdk/zulu11.48.21-ca-jdk11.0.11-linux_aarch64'
export JAVA_HOME
PATH="$JAVA_HOME/bin:$PATH"
export PATH
/usr/bin/retroarch -L /tmp/cores/freej2me_libretro.so --config /storage/.config/retroarch/retroarch.cfg "/tmp/Doom RPG.jar"
</code></pre>
    <h2>
     SDL 1.2 Compat
    </h2>
    <p>
     SDL 1.2 Compat is a translation library that translates SDL 1.2 calls to SDL 2 and works very well.
We have plenty of ports that work fantastic with it.
    </p>
    <p>
     To compile:
    </p>
    <pre><code>git clone https://github.com/libsdl-org/sdl12-compat.git
mkdir build &amp;&amp; cd build
cmake ..
make 
</code></pre>
    <p>
     To use SDL 1.2 Compat you simply copy the resulting sdl 1.2 .so file into the ports libs folder.
    </p>
    <p>
     The tool has some configuration options which may be of use in your port.
    </p>
    <p>
     SDL12COMPAT_USE_GAME_CONTROLLERS: (checked during SDL_Init) Use SDL2's higher-level Game Controller API to expose joysticks instead of its lower-level joystick API.
The benefit of this is that you can exert more control over arbitrary hardware (deadzones, button mapping, device name, etc),
and button and axes layouts are consistent (what is physically located where an Xbox360's "A" button is will always be SDL 1.2 joystick button 0, "B" will be 1, etc).
The downside is it might not expose all of a given piece of hardware's functionality, or simply not make sense in general...if you need to use a flight stick, for example,
you should not use this hint. If there is no known game controller mapping for a joystick, and this hint is in use, it will not be listed as an availble device.
    </p>
    <p>
     The Full Documentation can be found [here]
     <a href="https://github.com/libsdl-org/sdl12-compat">
      https://github.com/libsdl-org/sdl12-compat
     </a>
    </p>
    <h2>
     Godot
    </h2>
    <p>
     Godot Games are played via a custom export template tailored to SBC devices without X11 based on KMS/DRM with SDL2 called FRT.
The FRT binaries are prebuilt for you and are already in the PortMaster Runtime Repository.
    </p>
    <p>
     Limitations:
Also note that in my custom fork of FRT all joystick code is disabled because Godot preconfigures controls and SDL picks up these keys without any chance to remap them afterwards. See
     <a href="https://github.com/Cebion/frt">
      https://github.com/Cebion/frt
     </a>
    </p>
    <p>
     So all control is done via
     <code>
      gptokeyb
     </code>
     .
    </p>
    <p>
     To build: (These are already present in the PortMaster Runtime Repo))
    </p>
    <pre><code>Download the godot editor version you need for the godot game.
You can find out the version by examining the .pck file with https://dmitriysalnikov.itch.io/godot-pck-explorer
wget https://downloads.tuxfamily.org/godotengine/3.5/godot-3.5-stable.tar.xz
tar xf godot-3.5-stable.tar.xz
cd godot-3.5-stable/platform
git clone https://github.com/Cebion/frt.git
cd ../
scons platform=frt tools=no target=release use_llvm=yes module_webm_enabled=no -j12
strip bin/godot.frt.opt.llvm
</code></pre>
    <p>
     Then copy your binary to your game folder run it via:
    </p>
    <p>
     Either a .PCK file:
    </p>
    <pre><code>./frt_100_332_arm64.bin --main-pack meteor.pck
</code></pre>
    <p>
     Or via Folder:
    </p>
    <pre><code>/frt_3.2.3 --path godot-port-develop/
</code></pre>
    <p>
     If you encounter an error like:
    </p>
    <pre><code>ERROR: Failed loading resource: res://gfx/UI.png. Make sure resources have been imported by opening the project in the editor at least once.
at: _load (core/io/resource_loader.cpp:271)
ERROR: res://scenes/gui.tscn:11 - Parse Error: [ext_resource] referenced nonexistent resource at: res://gfx/UI.png
</code></pre>
    <p>
     Make sure the File is in the correct format.
For that import the project and reimport the file in the correct format.
For example sometimes a png file imported as a Texture causes problems and needs to be imported as an image.
    </p>
    <p>
     Godot Editor -&gt; Import Tab -&gt; Filter for file in Filesystem -&gt; Reimport As:
    </p>
    <h2>
     Godot 4
    </h2>
    <p>
     See the
     <a href="https://github.com/binarycounter/Westonpack/wiki/">
      WestonPack Wiki
     </a>
    </p>
    <h2>
     LÖVE (Love2D)
    </h2>
    <p>
     Love2d games are playable trough the aarch64 Port of every major version of Love2D
    </p>
    <p>
     To compile:
    </p>
    <h3>
     Löve 11.4
    </h3>
    <ul>
     <li>
      Built using Ubuntu 20.04 LTS aarch64 chroot
     </li>
    </ul>
    <pre><code>wget https://github.com/love2d/love/releases/download/11.4/love-11.4-linux-src.tar.gz
tar xf love-11.4-linux-src.tar.gz
cd love-11.4/
./configure
make -j12
strip src/.libs/liblove-11.4.so
copy src/.libs/liblove-11.4.so device/libs
copy src/.libs/love device/
</code></pre>
    <h3>
     Löve 0.10.2
    </h3>
    <ul>
     <li>
      Built using Ubuntu 20.04 LTS aarch64 chroot
     </li>
    </ul>
    <pre><code>wget https://github.com/love2d/love/releases/download/0.10.2/love-0.10.2-linux-src.tar.gz
tar xf love-0.10.2-linux-src.tar.gz
cd love-0.10.2
./configure
make -j12
strip src/.libs/liblove.so.0
copy src/.libs/lliblove.so.0 device/libs
copy src/.libs/love device/
</code></pre>
    <h3>
     Löve 0.9.2
    </h3>
    <ul>
     <li>
      Built using Ubuntu 20.04 LTS aarch64 chroot
     </li>
     <li>
      Uses experimental love2d gles build
     </li>
    </ul>
    <pre><code>git clone https://github.com/Cebion/love_0.9.2_GLES.git
cd love_0.9.2_GLES
platform/unix/automagic
./configure
make CFLAGS="-Wno-format-overflow"
</code></pre>
    <p>
     Requires the ENV variable LOVE_GRAPHICS_USE_OPENGLES=1 on launch
    </p>
    <h3>
     Löve 0.8
    </h3>
    <ul>
     <li>
      Built using Debian Stretch aarch64 chroot
     </li>
     <li>
      Needs boot.lua fixes to set fullscreen in the love binary before compiling
     </li>
    </ul>
    <pre><code>wget https://github.com/love2d/love/archive/refs/tags/0.8.0.tar.gz
tar xf 0.8.0.tar.gz
cd love_0.8.0
platform/unix/automagic
./configure
</code></pre>
    <p>
     Edit src/scripts/boot.lua
    </p>
    <p>
     Change:
    </p>
    <pre><code>		screen = {
			width = 800,
			height = 600,
			fullscreen = false,
			vsync = true,
			fsaa = 0,
		},
</code></pre>
    <p>
     to
    </p>
    <pre><code>		screen = {
			width = 640,
			height = 480,
			fullscreen = true,
			vsync = true,
			fsaa = 0,
		},
</code></pre>
    <p>
     Afterwards
    </p>
    <pre><code>cd src/scripts/
lua auto.lua boot
cd../../
make
</code></pre>
    <h3>
     Löve 0.7.2
    </h3>
    <ul>
     <li>
      Built using Debian Stretch aarch64 chroot
     </li>
     <li>
      Needs boot.lua fixes to set fullscreen in the love binary before compiling
     </li>
    </ul>
    <pre><code>wget https://github.com/love2d/love/archive/refs/tags/0.8.0.tar.gz
tar xf 0.8.0.tar.gz
cd love_0.8.0
platform/unix/automagic
./configure
</code></pre>
    <p>
     Edit src/scripts/boot.lua
    </p>
    <p>
     Change:
    </p>
    <pre><code>		screen = {
			width = 800,
			height = 600,
			fullscreen = false,
			vsync = true,
			fsaa = 0,
		},
</code></pre>
    <p>
     to
    </p>
    <pre><code>		screen = {
			width = 640,
			height = 480,
			fullscreen = true,
			vsync = true,
			fsaa = 0,
		},
</code></pre>
    <p>
     Afterwards
    </p>
    <pre><code>cd src/scripts/
lua auto.lua boot
cd../../
make
</code></pre>
    <h2>
     Notes about missing cursor in KMS/DRM in Love
    </h2>
    <p>
     You can add a software cursor for that
    </p>
    <p>
     KMS/DRM or FBDEV by default does not have a mouse cursor.
    </p>
    <p>
     Because of that we have to create a software cursor for each game.
It's a simple process
    </p>
    <p>
     Download a cursor
example:
     <a href="https://raw.githubusercontent.com/medeirosT/adwaita-2bit-cusors/main/left_ptr.png">
      https://raw.githubusercontent.com/medeirosT/adwaita-2bit-cusors/main/left_ptr.png
     </a>
     and place it in the game directory root.
    </p>
    <p>
     Edit the main.lua
    </p>
    <ol>
     <li>
      Edit the function love.load() and add
-- Load your cursor image
     </li>
    </ol>
    <p>
     <code>
      cursorImage = love.graphics.newImage("left_ptr.png")
     </code>
    </p>
    <ol start="2">
     <li>
      Hide the system cursor in the love.load() function:
     </li>
    </ol>
    <p>
     <code>
      love.mouse.setVisible(false)
     </code>
    </p>
    <ol start="3">
     <li>
      Draw the custom cursor image in a new drawCursor function and call it at the end of the love.draw() function:
     </li>
    </ol>
    <pre><code>function drawCursor()
    local mouseX, mouseY = love.mouse.getPosition()
    love.graphics.draw(cursorImage, mouseX, mouseY)
end

function love.draw()
    -- Rest of the code

    -- Draw the custom cursor
    drawCursor()
end
</code></pre>
    <ol start="4">
     <li>
      Add cursor scaling to love.update()
     </li>
    </ol>
    <pre><code>local xOffset = (love.graphics.getWidth() - simpleScale.getScale() * gw) / 2
 mx = (love.mouse.getX() - xOffset) / simpleScale.getScale()
 my = love.mouse.getY() / simpleScale.getScale()
</code></pre>
    <h2>
     Box86
    </h2>
    <p>
     To compile:
    </p>
    <pre><code>Coming soon 
</code></pre>
    <h2>
     Box64
    </h2>
    <p>
     To compile:
    </p>
    <pre><code>Coming soon
</code></pre>
    <h2>
     Mono
    </h2>
    <p>
     Coming Soon
    </p>
    <h2>
     GMS
    </h2>
    <h3>
     Checking your GMS game before suggesting
    </h3>
    <p>
     In this short tutorial, we'll explain how to check your GameMakerStudio (GMS) suggestion for essential information. We'll use UnderTaleModTool to determine the GMS version, bytecode version, and whether the game uses YYC. This information is crucial for assessing the game's compatibility and feasibility for porting to devices supported by PortMaster.
    </p>
    <h3>
     What is YYC?
    </h3>
    <p>
     YYC, or YoYo Compiler, is a feature in GameMaker Studio that compiles game code directly into machine code. This results in faster execution speeds and enhanced security. However, the compiled code is tightly integrated into the executable, limiting portability to other platforms.
    </p>
    <h3>
     Step 1: Install UnderTaleModTool and open the program
    </h3>
    <p>
     The first step in obtaining the required information is to download UnderTaleModTool from
     <a href="https://github.com/UnderminersTeam/UndertaleModTool/releases">
      here
     </a>
     . Please download the latest Bleeding Edge release for your platform. We'll be using the GUI version.
    </p>
    <h3>
     Step 2: Extracting the game assets (Skip this step if your suggestion is a Windows or Linux game)
    </h3>
    <p>
     Android GameMaker Studio games are packaged in an Android Package (APK) file. To extract the assets from the APK, we can use a program like
     <a href="https://www.7-zip.org/download.html">
      7Zip
     </a>
     . After installing 7Zip, locate your APK file, right-click, select 7Zip, then choose "extract to gamename". This will create an extracted folder with the game's assets.
    </p>
    <h3>
     Step 3: Open your GMS suggestion in UnderTaleModTool
    </h3>
    <p>
     Now, open UnderTaleModTool. Click on
     <em>
      File
     </em>
     in the menu bar, then select
     <em>
      Open
     </em>
     . Locate the game's assets. For Android games, this will be under
     <em>
      assets
     </em>
     in the folder we extracted earlier. You will find a file named data.win, game.unx, or game.droid. Double-click on the respective file to open it with UnderTaleModTool.
    </p>
    <h3>
     Step 4: Determine if the game uses the YoYo Compiler
    </h3>
    <p>
     UnderTaleModTool can detect if a game uses the YoYo Compiler. If the game uses YYC, a warning will pop up. If no warning appears, the game uses the bytecode compiler.
    </p>
    <h3>
     Step 5: Determine the GameMaker Studio and Bytecode versions
    </h3>
    <p>
     In UnderTaleModTool, find the relevant information by clicking on
     <em>
      Data
     </em>
     then
     <em>
      General Info
     </em>
     . The bytecode version is displayed in the top field, labeled "Bytecode version", with a number between thirteen and seventeen. A couple of fields below, you will see one named
     <em>
      Version
     </em>
     , which displays the GameMakerStudio version. This version can be categorized into the following groups:
    </p>
    <ul>
     <li>
      GMS 1.X.X.X
     </li>
     <li>
      GMS 2.X.X.X
     </li>
     <li>
      GMS 2022.X
     </li>
     <li>
      GMS 2023.X
     </li>
     <li>
      GMS 2024.X
     </li>
    </ul>
    <h3>
     Step 6: Determine if the game is compatible
    </h3>
    <p>
     Refer to the table below to determine if the game has potential to be ported:
    </p>
    <table class="table table-bordered">
     <thead>
      <tr>
       <th>
        Platform
       </th>
       <th>
        Bytecode
       </th>
       <th>
        YYC
       </th>
      </tr>
     </thead>
     <tbody>
      <tr>
       <td>
        Android
       </td>
       <td>
        Yes
       </td>
       <td>
        Yes
       </td>
      </tr>
      <tr>
       <td>
        Windows
       </td>
       <td>
        Yes
       </td>
       <td>
        No
       </td>
      </tr>
      <tr>
       <td>
        Linux
       </td>
       <td>
        Yes
       </td>
       <td>
        No
       </td>
      </tr>
     </tbody>
    </table>
    <h3>
     Additional notes
    </h3>
    <p>
     There are instances where a seemingly incompatible game
     <em>
      can
     </em>
     be compatible. It's possible that developers only use the YoYo Compiler on certain platforms, or older versions of a game were not YYC. If you find a compatible version, ensure it can be legally and trustworthily downloaded, such as through the Steam Console. Don't forget to include instructions if you're suggesting such a game.
    </p>
    <h2>
     Problems you might encounter when compiling open source software:
    </h2>
    <h3>
     cannot guess build type:
    </h3>
    <pre><code>wget 'http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD' -O './config.guess' &amp;&amp;
wget 'http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD' -O './config.sub'
</code></pre>
    <script>
     anchors.options.visible = 'always';
        anchors.add();
    </script>
   </main>
   <footer class="my-5 pt-5 text-body-secondary text-center text-small">
   </footer>
  </div>
 </body>
</html>
